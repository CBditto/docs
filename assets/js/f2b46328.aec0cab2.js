"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[487],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return f}});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(n),f=i,m=p["".concat(s,".").concat(f)]||p[f]||d[f]||o;return n?r.createElement(m,a(a({ref:t},c),{},{components:n})):r.createElement(m,a({ref:t},c))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var u=2;u<o;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},79443:function(e,t,n){var r=(0,n(67294).createContext)(void 0);t.Z=r},80944:function(e,t,n){var r=n(67294),i=n(79443);t.Z=function(){var e=(0,r.useContext)(i.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e}},30547:function(e,t,n){var r=n(67294);t.Z=function(e){var t=e.children,n=e.hidden,i=e.className;return r.createElement("div",{role:"tabpanel",hidden:n,className:i},t)}},49366:function(e,t,n){var r=n(67294),i=n(80944),o=n(86010);t.Z=function(e){var t,n=e.lazy,a=(e.block,e.defaultValue),l=e.values,s=e.groupId,u=(e.className,r.Children.toArray(e.children)),c=null!=l?l:u.map((function(e){return{value:e.props.value,label:e.props.label}})),d=null!=a?a:null==(t=u.find((function(e){return e.props.default})))?void 0:t.props.value,p=(0,i.Z)(),f=p.tabGroupChoices,m=p.setTabGroupChoices,y=(0,r.useState)(d),h=y[0],v=y[1];if(null!=s){var g=f[s];null!=g&&g!==h&&c.some((function(e){return e.value===g}))&&v(g)}var b=function(e){v(e),null!=s&&m(s,e)};return r.createElement("div",{className:"tabs-container"},r.createElement("div",{className:"sm:hidden"},r.createElement("label",{htmlFor:"tabs",className:"sr-only"},"Select a tab"),r.createElement("select",{id:"tabs",name:"tabs",value:h,onChange:function(e){return b(e.currentTarget.value)},className:"block w-full focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md"},c.map((function(e){var t=e.value,n=e.label;return r.createElement("option",{value:t,key:t},null!=n?n:t)})))),r.createElement("div",{className:"hidden sm:block"},r.createElement("nav",{className:"flex space-x-4","aria-label":"Tabs"},c.map((function(e){var t=e.value,n=e.label;return r.createElement("button",{key:t,onClick:function(){return b(t)},className:(0,o.Z)(h===t?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700","px-3 py-2 font-medium text-sm rounded-md"),"aria-current":h===t?"page":void 0},null!=n?n:t)})))),n?(0,r.cloneElement)(u.filter((function(e){return e.props.value===h}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},u.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==h})}))))}},39713:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return u},toc:function(){return c},default:function(){return p}});var r=n(87462),i=n(63366),o=(n(67294),n(3905)),a=(n(49366),n(30547),["components"]),l={title:"Rust",sidebar_position:8,pagination_prev:"intro",pagination_next:"concepts/overview"},s=void 0,u={unversionedId:"installation/rust",id:"installation/rust",isDocsHomePage:!1,title:"Rust",description:"Create a new project with cargo init --bin and add the following to your Cargo.toml file.",source:"@site/docs/installation/rust.md",sourceDirName:"installation",slug:"/installation/rust",permalink:"/installation/rust",editUrl:"https://github.com/getditto/docs/edit/master/docs/installation/rust.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{title:"Rust",sidebar_position:8,pagination_prev:"intro",pagination_next:"concepts/overview"},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/"},next:{title:"Overview",permalink:"/concepts/overview"}},c=[{value:"Suggested App Filesystem Structure",id:"suggested-app-filesystem-structure",children:[],level:2},{value:"Cross Compiling with the Ditto Rust SDK",id:"cross-compiling-with-the-ditto-rust-sdk",children:[],level:2},{value:"Common Issues",id:"common-issues",children:[{value:"I get an error: &quot;error: could not find native static library <code>dittoffi</code>, perhaps an -L flag is missing&quot;. What should I do?",id:"i-get-an-error-error-could-not-find-native-static-library-dittoffi-perhaps-an--l-flag-is-missing-what-should-i-do",children:[{value:"Diagnosis",id:"diagnosis",children:[],level:4},{value:"Solutions",id:"solutions",children:[],level:4}],level:3}],level:2}],d={toc:c};function p(e){var t=e.components,n=(0,i.Z)(e,a);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Create a new project with ",(0,o.kt)("inlineCode",{parentName:"p"},"cargo init --bin")," and add the following to your ",(0,o.kt)("inlineCode",{parentName:"p"},"Cargo.toml")," file."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml"},'[dependencies.dittolive-ditto]\nversion = "1.0"\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"cargo build\n")),(0,o.kt)("h2",{id:"suggested-app-filesystem-structure"},"Suggested App Filesystem Structure"),(0,o.kt)("p",null,"Rust doesn't prescribe any particular structure for your project's layout on the end user's device filesystem. The following is one recommendation"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AppRoot/AppExecutable")," - The path of your app's executable. Everything else should be relative to this. The binary component of Ditto may optionally be statically linked into this executable (default)."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AppRoot/libdittoffi.dll")," -  The path to the binary ditto library if using the shared library version. Configure your app's linker to search for the library here (e.g. ",(0,o.kt)("inlineCode",{parentName:"li"},"@executable_path/../libdittoffi.dylib"),"). You will need to copy this shared library from ",(0,o.kt)("inlineCode",{parentName:"li"},"target/<profile>/build/dittolive-ditto-sys<hash>/out")," when distributing your app."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AppRoot/ditto_data/")," - Base directory for all locally stored Ditto data.")),(0,o.kt)("h2",{id:"cross-compiling-with-the-ditto-rust-sdk"},"Cross Compiling with the Ditto Rust SDK"),(0,o.kt)("p",null,"The rust compiler is natively capable of cross-compiling for a wide range of targets. You will need to configure a local ",(0,o.kt)("inlineCode",{parentName:"p"},".cargo/config.toml")," file in the root of your project directory to provide the necessary ",(0,o.kt)("inlineCode",{parentName:"p"},"rustc"),", linker, and potentially C compiler arguements. For most targets you will need to provide an alternative sysroot for your target (not host) platform, often exposing a POSIX C library, header files, binutils, and a linker."),(0,o.kt)("h2",{id:"common-issues"},"Common Issues"),(0,o.kt)("h3",{id:"i-get-an-error-error-could-not-find-native-static-library-dittoffi-perhaps-an--l-flag-is-missing-what-should-i-do"},'I get an error: "error: could not find native static library ',(0,o.kt)("inlineCode",{parentName:"h3"},"dittoffi"),', perhaps an -L flag is missing". What should I do?'),(0,o.kt)("h4",{id:"diagnosis"},"Diagnosis"),(0,o.kt)("p",null,"The Ditto SDK build.rs script failed to download an appropriate ditto binary for your target platform. Check your internet connection is live and Ditto version number is correct. Inspect the downloaded library in the cargo build cache (default is ",(0,o.kt)("inlineCode",{parentName:"p"},"target/<profile>/build/dittolive-ditto-sys-<hash>/out/libdittoffi.{a,dylib,so,dll}"),") using your platforms utilties such as ",(0,o.kt)("inlineCode",{parentName:"p"},"file"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"otool"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"readelf")," or similar. Try updating to the latest release of ",(0,o.kt)("inlineCode",{parentName:"p"},"dittolive-ditto"),". You can also manually download the binary yourself."),(0,o.kt)("h4",{id:"solutions"},"Solutions"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Try updating to a more recent version of ",(0,o.kt)("inlineCode",{parentName:"li"},"dittolive-ditto")," ."),(0,o.kt)("li",{parentName:"ol"},"Manually download the library yourself and verify it completes successfully."),(0,o.kt)("li",{parentName:"ol"},"Force the build script to look for the library in a specific directory by exporting ",(0,o.kt)("inlineCode",{parentName:"li"},"DITTOFFI_SEARCH_PATH")," during compilation and execution.")))}p.isMDXComponent=!0},86010:function(e,t,n){function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}n.d(t,{Z:function(){return i}})}}]);