"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3614],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var i=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=i.createContext({}),c=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return i.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},p=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),m=r,h=p["".concat(s,".").concat(m)]||p[m]||d[m]||a;return n?i.createElement(h,o(o({ref:t},u),{},{components:n})):i.createElement(h,o({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var c=2;c<a;c++)o[c]=n[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}p.displayName="MDXCreateElement"},79443:function(e,t,n){var i=(0,n(67294).createContext)(void 0);t.Z=i},80944:function(e,t,n){var i=n(67294),r=n(79443);t.Z=function(){var e=(0,i.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e}},30547:function(e,t,n){var i=n(67294);t.Z=function(e){var t=e.children,n=e.hidden,r=e.className;return i.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},49366:function(e,t,n){var i=n(67294),r=n(80944),a=n(86010);t.Z=function(e){var t,n=e.lazy,o=e.platform,l=(e.block,e.defaultValue),s=e.values,c=e.groupId,u=(e.className,i.Children.toArray(e.children)),d=null!=s?s:u.map((function(e){return{value:e.props.value,label:e.props.label}})),p=null!=l?l:null==(t=u.find((function(e){return e.props.default})))?void 0:t.props.value,m=(0,r.Z)(),h=m.tabGroupChoices,f=m.setTabGroupChoices,y=(0,i.useState)(p),v=y[0],k=y[1];(0,i.useEffect)((function(){if(null!=c){var e=h[c];null!=e&&e!==v&&(d.some((function(t){return t.value===e}))?k(e):k(p))}}),[o,h[c]]);var b=function(e){k(e),null!=c&&f(c,e)},g=d.length>1;return i.createElement("div",{className:"tabs-container"},g&&i.createElement(i.Fragment,null,i.createElement("div",{className:"sm:hidden"},i.createElement("label",{htmlFor:"tabs",className:"sr-only"},"Select a tab"),i.createElement("select",{id:"tabs",name:"tabs",value:v,onChange:function(e){return b(e.currentTarget.value)},className:"block w-full focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md"},d.map((function(e){var t=e.value,n=e.label;return i.createElement("option",{value:t,key:t},null!=n?n:t)})))),i.createElement("div",{className:"hidden sm:block"},i.createElement("nav",{className:"flex space-x-4","aria-label":"Tabs"},d.map((function(e){var t=e.value,n=e.label;return i.createElement("button",{key:t,onClick:function(){return b(t)},className:(0,a.Z)(v===t?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700","px-3 py-2 font-medium text-sm rounded-md"),"aria-current":v===t?"page":void 0},null!=n?n:t)}))))),n?(0,i.cloneElement)(u.filter((function(e){return e.props.value===v}))[0],{className:"margin-vert--md"}):i.createElement("div",{className:"margin-vert--md"},u.map((function(e,t){return(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==v})}))))}},86315:function(e,t,n){n.r(t),n.d(t,{contentTitle:function(){return s},default:function(){return p},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return u}});var i=n(87462),r=n(63366),a=(n(67294),n(3905)),o=(n(49366),n(30547),["components"]),l={title:"Identities",sidebar_position:1},s=void 0,c={unversionedId:"security/overview",id:"security/overview",isDocsHomePage:!1,title:"Identities",description:'Most applications need a way to control which users can write or read certain data. For example, you might build an application where senior staff members can READ and WRITE documents in the "menuItems" collection while junior staff members can only READ. Ditto\'s security is controlled by identities. Each Ditto instance must identify itself to other peers in order to syncronize with them.',source:"@site/docs/common/security/overview.mdx",sourceDirName:"security",slug:"/security/overview",permalink:"/common/security/overview",editUrl:"https://github.com/getditto/docs/edit/main/docs/common/security/overview.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Identities",sidebar_position:1},sidebar:"defaultSidebar",previous:{title:"4 - Producing events",permalink:"/common/guides/kafka/producers"},next:{title:"Overview",permalink:"/common/security/authentication/overview"}},u=[{value:"Get started",id:"get-started",children:[{value:"Development identities",id:"development-identities",children:[],level:3},{value:"Production identities",id:"production-identities",children:[],level:3}],level:2},{value:"Ditto Identity Lifecycle",id:"ditto-identity-lifecycle",children:[{value:"Parts of a Ditto Identity",id:"parts-of-a-ditto-identity",children:[],level:3}],level:2}],d={toc:u};function p(e){var t=e.components,n=(0,r.Z)(e,o);return(0,a.kt)("wrapper",(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Most applications need a way to control which users can write or read certain data. For example, you might build an application where senior staff members can ",(0,a.kt)("inlineCode",{parentName:"p"},"READ")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"WRITE")," documents in the ",(0,a.kt)("inlineCode",{parentName:"p"},'"menuItems"')," collection while junior staff members can only ",(0,a.kt)("inlineCode",{parentName:"p"},"READ"),". Ditto's security is controlled by ",(0,a.kt)("strong",{parentName:"p"},"identities"),". Each Ditto instance must identify itself to other peers in order to syncronize with them."),(0,a.kt)("h2",{id:"get-started"},"Get started"),(0,a.kt)("p",null,"These sections will describe how you can:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Identify users "),(0,a.kt)("li",{parentName:"ol"},"Give users read or write control "),(0,a.kt)("li",{parentName:"ol"},"Integrate with your existing authentication systems")),(0,a.kt)("p",null,"There are several types of identities.  Every installation of an app that uses\nDitto has its own identity. This identity is used to identify each unique peer\nin the mesh network. Each Ditto Identity is associated to a single Ditto client\nvia a globally unique AppId and may not be used across multiple Ditto apps. Each identity has an ",(0,a.kt)("inlineCode",{parentName:"p"},"appID"),", an authentication certificate, and a set of ",(0,a.kt)("inlineCode",{parentName:"p"},"permissions"),"."),(0,a.kt)("h3",{id:"development-identities"},"Development identities"),(0,a.kt)("p",null,'When you start prototyping with Ditto you can use a "playground" identity.\nPlayground identities contain default settings and offer no real security.\nPlayground certificates should absolutely not be deployed to any production\nenvironments.'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"../mesh-network/online-playground"},"Online Playground")," - for prototyping with Ditto for hybrid/offline online synchornization. Start here!"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"../mesh-network/offline-license"},"Offline Playground")," - a low level of security for applications that never connect to the Internet.")),(0,a.kt)("h3",{id:"production-identities"},"Production identities"),(0,a.kt)("p",null,"Once you are ready to deploy, this can be swapped for a production identity where security is\nenforced."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"../security/authentication/overview"},"Online With Authentication")," - for hybrid offline/online synchronization with customized permissioning.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"../security/shared-key"},"Shared Key")," - an intermediate level of security for offline-only applications where all devices are trusted."),(0,a.kt)("p",{parentName:"li"}," A Ditto Identity is used\nto accept or reject read and writes with peer instances. Each Ditto Identity can\nbe associated to a set of ",(0,a.kt)("a",{parentName:"p",href:"../concepts/designing-permissions"},"access control permissions")," which you specify."))),(0,a.kt)("h2",{id:"ditto-identity-lifecycle"},"Ditto Identity Lifecycle"),(0,a.kt)("p",null,"While highly configurable, each Ditto Identity has a typical life cycle. First,\nthe Ditto Identity is constructed. Typically the only prerequisites are a Ditto\npersistence root (working directory for local data storage, where configured)\nand a globally unique Ditto AppId. In order to sync, all app instances,\nregardless of SDK language, ",(0,a.kt)("em",{parentName:"p"},"must"),' have the same globally unique Ditto AppId.\nTherefore this value will typically be incorporated in the App\'s bundle or\nprovided to the App when it starts. The Ditto Big Peer can create AppIds for\nyou, but it is not the authentication provider. Ditto Cloud is a proxy to your\nown "source of truth" for identities, credential validation, and permissions.'),(0,a.kt)("p",null,"Next the Ditto Identity is consumed by the Ditto constructor, yielding a\nconfigured ",(0,a.kt)("inlineCode",{parentName:"p"},"Ditto")," instance. The Ditto instance will contain a Ditto\nAuthenticator and your own implementation of the ",(0,a.kt)("inlineCode",{parentName:"p"},"DittoAuthEventHandler"),"\ninterface, which can provide login credentials. Ditto will then contact the\nconfigured Auth Url and supply the login credentials to an Authentication\nProvider. If the credentials are valid, then the Authentication Provider will\nreturn to Ditto an Authentication Token, validating its credentials and granting\nthe Ditto instance individualized permissions. The Ditto instance can now sync\nwith other peers."),(0,a.kt)("h3",{id:"parts-of-a-ditto-identity"},"Parts of a Ditto Identity"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"AppId"),' - Uniquely Identifies a Ditto-based App. It establishes a top-level "namespace" within which all Ditto Identities, collections of documents, timeseries events, and permissions live. It is a part of all Identity types. It may be either a string or, more typically, a UUID v4 lowercased and hyphenated. The Ditto Big Peer provisions ',(0,a.kt)("inlineCode",{parentName:"li"},"UUIDv4")," strings that be used to sync with its servers in the Cloud."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"CustomAuthUrl")," - The URL of an Auth Provider which can validate credentials and issue Auth Tokens and x509 certificates. The default values is ",(0,a.kt)("inlineCode",{parentName:"li"},"https://<app-id>.cloud.ditto.live/"),". A ",(0,a.kt)("inlineCode",{parentName:"li"},"CustomAuthUrl")," is only required when another, possibly self-hosted, Auth Provider is preferred. ",(0,a.kt)("inlineCode",{parentName:"li"},"OfflinePlayground"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"SharedKey"),", and ",(0,a.kt)("inlineCode",{parentName:"li"},"Manual")," Identities don't require any AuthURL."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"EnableCloudSync")," - Whether Ditto should attempt to sync with ",(0,a.kt)("inlineCode",{parentName:"li"},"wss://<app-id>.cloud.ditto.live"),". Only used by ",(0,a.kt)("inlineCode",{parentName:"li"},"OnlineWithAuthentication")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"OnlinePlayground")," Identities. If you're hosting your own Ditto Big Peer, this should be set to ",(0,a.kt)("inlineCode",{parentName:"li"},"false")," and a custom SyncUrl provided to the Ditto ",(0,a.kt)("inlineCode",{parentName:"li"},"TransportConfig")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"WorkingDir")," (DittoRoot) - A location where Ditto can cache Auth Tokens, x509 certificates, and other auth-related data. Typically the same as the working directory containing Ditto's local data store."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"AuthEventHandler")," (Callback) - A type defined by the App developer which implements the ",(0,a.kt)("inlineCode",{parentName:"li"},"DittoAuthEventHandler")," (",(0,a.kt)("inlineCode",{parentName:"li"},"DittoAuthCallback"),") Trait/Interface/Protocol. Typically responsible for obtaining and storing credentials like a username, password, or other token from the App's user and then supplying them to Ditto when authentication is required.")),(0,a.kt)("p",null,"For more detailed information on what is contained within Ditto Identity certificates, see ",(0,a.kt)("a",{parentName:"p",href:"../how-it-works/certificate-security"},"Certificate Security"),"."))}p.isMDXComponent=!0},86010:function(e,t,n){function i(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=i(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=i(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{Z:function(){return r}})}}]);