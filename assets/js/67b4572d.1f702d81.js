"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3824],{3905:function(n,t,e){e.d(t,{Zo:function(){return p},kt:function(){return g}});var o=e(67294);function a(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function i(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,o)}return e}function r(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?i(Object(e),!0).forEach((function(t){a(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function s(n,t){if(null==n)return{};var e,o,a=function(n,t){if(null==n)return{};var e,o,a={},i=Object.keys(n);for(o=0;o<i.length;o++)e=i[o],t.indexOf(e)>=0||(a[e]=n[e]);return a}(n,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(o=0;o<i.length;o++)e=i[o],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(a[e]=n[e])}return a}var l=o.createContext({}),c=function(n){var t=o.useContext(l),e=t;return n&&(e="function"==typeof n?n(t):r(r({},t),n)),e},p=function(n){var t=c(n.components);return o.createElement(l.Provider,{value:t},n.children)},d={inlineCode:"code",wrapper:function(n){var t=n.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(n,t){var e=n.components,a=n.mdxType,i=n.originalType,l=n.parentName,p=s(n,["components","mdxType","originalType","parentName"]),u=c(e),g=a,m=u["".concat(l,".").concat(g)]||u[g]||d[g]||i;return e?o.createElement(m,r(r({ref:t},p),{},{components:e})):o.createElement(m,r({ref:t},p))}));function g(n,t){var e=arguments,a=t&&t.mdxType;if("string"==typeof n||a){var i=e.length,r=new Array(i);r[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=n,s.mdxType="string"==typeof n?n:a,r[1]=s;for(var c=2;c<i;c++)r[c]=e[c];return o.createElement.apply(null,r)}return o.createElement.apply(null,e)}u.displayName="MDXCreateElement"},79443:function(n,t,e){var o=(0,e(67294).createContext)(void 0);t.Z=o},80944:function(n,t,e){var o=e(67294),a=e(79443);t.Z=function(){var n=(0,o.useContext)(a.Z);if(null==n)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return n}},30547:function(n,t,e){var o=e(67294);t.Z=function(n){var t=n.children,e=n.hidden,a=n.className;return o.createElement("div",{role:"tabpanel",hidden:e,className:a},t)}},49366:function(n,t,e){var o=e(67294),a=e(80944),i=e(86010);t.Z=function(n){var t,e=n.lazy,r=(n.block,n.defaultValue),s=n.values,l=n.groupId,c=(n.className,o.Children.toArray(n.children)),p=null!=s?s:c.map((function(n){return{value:n.props.value,label:n.props.label}})),d=null!=r?r:null==(t=c.find((function(n){return n.props.default})))?void 0:t.props.value,u=(0,a.Z)(),g=u.tabGroupChoices,m=u.setTabGroupChoices,f=(0,o.useState)(d),v=f[0],T=f[1];if(null!=l){var b=g[l];null!=b&&b!==v&&p.some((function(n){return n.value===b}))&&T(b)}var C=function(n){T(n),null!=l&&m(l,n)};return o.createElement("div",{className:"tabs-container"},o.createElement("div",{className:"sm:hidden"},o.createElement("label",{htmlFor:"tabs",className:"sr-only"},"Select a tab"),o.createElement("select",{id:"tabs",name:"tabs",value:v,onChange:function(n){return C(n.currentTarget.value)},className:"block w-full focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md"},p.map((function(n){var t=n.value,e=n.label;return o.createElement("option",{value:t,key:t},null!=e?e:t)})))),o.createElement("div",{className:"hidden sm:block"},o.createElement("nav",{className:"flex space-x-4","aria-label":"Tabs"},p.map((function(n){var t=n.value,e=n.label;return o.createElement("button",{key:t,onClick:function(){return C(t)},className:(0,i.Z)(v===t?"bg-blue-100 text-blue-700":"text-gray-500 hover:text-gray-700","px-3 py-2 font-medium text-sm rounded-md"),"aria-current":v===t?"page":void 0},null!=e?e:t)})))),e?(0,o.cloneElement)(c.filter((function(n){return n.props.value===v}))[0],{className:"margin-vert--md"}):o.createElement("div",{className:"margin-vert--md"},c.map((function(n,t){return(0,o.cloneElement)(n,{key:t,hidden:n.props.value!==v})}))))}},92947:function(n,t,e){e.r(t),e.d(t,{frontMatter:function(){return c},contentTitle:function(){return p},metadata:function(){return d},toc:function(){return u},default:function(){return m}});var o=e(87462),a=e(63366),i=(e(67294),e(3905)),r=e(49366),s=e(30547),l=["components"],c={title:"Network Configuration"},p=void 0,d={unversionedId:"concepts/network",id:"concepts/network",isDocsHomePage:!1,title:"Network Configuration",description:"There are instances where you may want to configure additional connections configurations for the current Ditto instance. This section will teach you how to configure your Ditto instance to listen for connections on a port explicitly and to connect to remote instances via a host (IP) and port. To do this, before you call tryStartSync(), construct a DittoTransportConfig value and set ditto.SetTransportConfig.",source:"@site/docs/concepts/network.mdx",sourceDirName:"concepts",slug:"/concepts/network",permalink:"/concepts/network",editUrl:"https://github.com/getditto/docs/edit/master/docs/concepts/network.mdx",tags:[],version:"current",frontMatter:{title:"Network Configuration"},sidebar:"tutorialSidebar",previous:{title:"HTTP API Reference",permalink:"/concepts/http"},next:{title:"Introduction",permalink:"/tutorials/tasks/index"}},u=[{value:"Connecting to a Remote Ditto instance",id:"connecting-to-a-remote-ditto-instance",children:[],level:2},{value:"Listening for Connections on a Specific Port",id:"listening-for-connections-on-a-specific-port",children:[],level:2},{value:"Combining Multiple Transports",id:"combining-multiple-transports",children:[],level:2},{value:"Monitoring Transport Conditions",id:"monitoring-transport-conditions",children:[],level:2}],g={toc:u};function m(n){var t=n.components,e=(0,a.Z)(n,l);return(0,i.kt)("wrapper",(0,o.Z)({},g,e,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"There are instances where you may want to configure additional connections configurations for the current Ditto instance. This section will teach you how to configure your Ditto instance to listen for connections on a port explicitly and to connect to remote instances via a host (IP) and port. To do this, ",(0,i.kt)("em",{parentName:"p"},"before")," you call ",(0,i.kt)("inlineCode",{parentName:"p"},"tryStartSync()"),", construct a ",(0,i.kt)("inlineCode",{parentName:"p"},"DittoTransportConfig")," value and set ",(0,i.kt)("inlineCode",{parentName:"p"},"ditto.SetTransportConfig"),"."),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"If you do not attempt to configure a ",(0,i.kt)("inlineCode",{parentName:"p"},"DittoTransportConfig")," but call ",(0,i.kt)("inlineCode",{parentName:"p"},"ditto.TryStartSync()"),", your Ditto instance will automatically attempt to connect to other ditto instances on the Local Area Network. However, if you supply a ",(0,i.kt)("inlineCode",{parentName:"p"},"DittoTransportConfig"),", this will not automatically be enabled. You'll need to remember to enable local area network peer to peer connnections with ",(0,i.kt)("inlineCode",{parentName:"p"},"EnableAllPeerToPeer()"),"."))),(0,i.kt)("h2",{id:"connecting-to-a-remote-ditto-instance"},"Connecting to a Remote Ditto instance"),(0,i.kt)("p",null,"If you know the host and port of another remote Ditto instance and would like to connect to it, construct a ",(0,i.kt)("inlineCode",{parentName:"p"},"DittoTransportConfig")," object and add the host and port to the ",(0,i.kt)("inlineCode",{parentName:"p"},"DittoTransportConfig.Connect.TcpServers")," property as a ",(0,i.kt)("inlineCode",{parentName:"p"},"string"),". The string format should be ",(0,i.kt)("inlineCode",{parentName:"p"},"host:port"),", separated by a colon."),(0,i.kt)("p",null,"In the example below, we know of two other Ditto instances located on:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Host IP ",(0,i.kt)("inlineCode",{parentName:"li"},"135.1.5.5")," at port ",(0,i.kt)("inlineCode",{parentName:"li"},"12345")),(0,i.kt)("li",{parentName:"ul"},"Host IP ",(0,i.kt)("inlineCode",{parentName:"li"},"185.1.5.5")," at port ",(0,i.kt)("inlineCode",{parentName:"li"},"4567"))),(0,i.kt)(r.Z,{groupId:"programming-language",defaultValue:"javascript",values:[{label:"JavaScript",value:"javascript"},{label:"Swift",value:"swift"},{label:"Objective-C",value:"objc"},{label:"Kotlin",value:"kotlin"},{label:"Java",value:"java"},{label:"C#",value:"csharp"},{label:"C++",value:"cpp"},{label:"Rust",value:"rust"}],mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"javascript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'import { TransportConfig } from \'@dittolive/ditto\'\n\nconst config = new TransportConfig()\nconfig.connect.tcpServers.push("135.1.5.5:12345")\nconfig.connect.tcpServers.push("185.1.5.5:12345")\nditto.setTransportConfig(config);\nditto.tryStartSync();\n')),(0,i.kt)("p",null,"When running on a web browser, you'll need to specify ",(0,i.kt)("em",{parentName:"p"},"WebSocket")," endpoints. Web browsers are not capable of raw TCP connections. "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'import { TransportConfig } from \'@dittolive/ditto\'\n\nconst config = new TransportConfig()\nconfig.connect.websocketURLs.push("wss://135.1.5.5:12345")\nconfig.connect.websocketURLs.push("wss://185.1.5.5:12345")\nditto.setTransportConfig(config);\nditto.tryStartSync();\n'))),(0,i.kt)(s.Z,{value:"swift",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},'var config = DittoTransportConfig()\n// Connect explicitly to a remote devices\nconfig.connect.tcpServers.add("135.1.5.5:12345")\nconfig.connect.tcpServers.add("185.1.5.5:12345")\n\nditto.setTransportConfig(config: config)\n\ndo {\n  try ditto.tryStartSync()\n} catch (let err) {\n  print(err.localizedDescription)\n}\n'))),(0,i.kt)(s.Z,{value:"objc",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-objc"},'DITMutableTransportConfig *transportConfig = [[DITMutableTransportConfig alloc] init];\n[transportConfig.connect.tcpServers addObject:@"135.1.5.5:12345"];\n[transportConfig.connect.tcpServers addObject:@"185.1.5.5:12345"];\n[ditto setTransportConfig:transportConfig];\nNSError *err = nil;\n[ditto tryStartSync:&err];\n'))),(0,i.kt)(s.Z,{value:"kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val transportConfig = DittoTransportConfig();\n\ntransportConfig.connect.tcpServers.add("135.1.5.5:12345");\ntransportConfig.connect.tcpServers.add("185.1.5.5:12345");\n\nditto.tryStartSync()\n'))),(0,i.kt)(s.Z,{value:"java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'DittoTransportConfig config = new DittoTransportConfig();\nDittoConnect connect = new DittoConnect();\nconnect.setTcpServers(Sets.newHashSet("135.1.5.5:12345", "185.1.5.5:12345"));\nconfig.setConnect(connect);\n\ntry {\n    ditto.tryStartSync();    \n} catch(DittoError error) {\n    Log.d("DittoError", error.getLocalizedMessage());\n}\n'))),(0,i.kt)(s.Z,{value:"csharp",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp"},'DittoTransportConfig transportConfig = new DittoTransportConfig();\n// Connect explicitly to a remote device on \ntransportConfig.Connect.TcpServers.Add("135.1.5.5:12345");\n// you can add as many TcpServers as you would like.\ntransportConfig.Connect.TcpServers.Add("185.1.5.5:4567");\n// set the transport config \nditto.SetTransportConfig(transportConfig);\n// now you can start ditto\'s sync \nditto.TryStartSync();\n'))),(0,i.kt)(s.Z,{value:"cpp",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},'auto config = ditto::TransportConfig();\n// Connect explicitly to remote devices\nconfig.connect.tcp_servers.insert("135.1.5.5:12345");\nconfig.connect.tcp_servers.insert("185.1.5.5:12345");\n\n// set the transport config \nditto->set_transport_config(config);\n// now you can start ditto\'s sync \nditto->try_start_sync()\n'))),(0,i.kt)(s.Z,{value:"rust",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-rust"},'let mut config = TransportConfig::new(); // empty\n\nconfig.connect.tcp_servers.insert("135.1.5.5:12345"); // Custom TCP Listener\nconfig.connect.tcp_servers.insert("185.1.5.5:12345"); // Custom TCP Listener\nconfig.connect.websocket_urls.insert("wss://example.com"); // Custom WS endpoint\n\nditto.set_transport_config(config);\nditto.try_start_sync()?;\n')))),(0,i.kt)("p",null,"Feel free to add as many known remote ",(0,i.kt)("inlineCode",{parentName:"p"},"host:port")," strings."),(0,i.kt)("h2",{id:"listening-for-connections-on-a-specific-port"},"Listening for Connections on a Specific Port"),(0,i.kt)("p",null,'You can enable the Ditto instance to listen for incoming connections from other\nremotes Ditto instances on a specific port. You can think of this as setting up your\nDitto peer as a "server" that can listen to connections from other peers.'),(0,i.kt)("p",null,"In this example, we would like our Ditto instance to listen to ",(0,i.kt)("em",{parentName:"p"},"incoming")," connections on port ",(0,i.kt)("inlineCode",{parentName:"p"},"4000")," on ",(0,i.kt)("inlineCode",{parentName:"p"},"0.0.0.0"),". "),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"To be safe, please do not use ",(0,i.kt)("inlineCode",{parentName:"p"},"localhost")," when setting the IP interface. Use ",(0,i.kt)("inlineCode",{parentName:"p"},'"0.0.0.0"')," instead."))),(0,i.kt)(r.Z,{groupId:"programming-language",defaultValue:"javascript",values:[{label:"Swift",value:"swift"},{label:"Node.js",value:"javascript"},{label:"Objective-C",value:"objc"},{label:"Kotlin",value:"kotlin"},{label:"Java",value:"java"},{label:"C#",value:"csharp"},{label:"C++",value:"cpp"},{label:"Rust",value:"rust"}],mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"javascript",mdxType:"TabItem"},(0,i.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Listening on a port is only available on Node or Electron environments. This functionality will not work when running inside of a web browser. Web browsers do not allow code to listen to a host's IP or port."))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'const config = new TransportConfig()\nconfig.listen.tcp.isEnabled = true\nconfig.listen.tcp.interfaceIP = "0.0.0.0"\nconfig.listen.tcp.port = 4000\nditto.setTransportConfig(config);\nditto.tryStartSync();\n'))),(0,i.kt)(s.Z,{value:"swift",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},'var config = DittoTransportConfig()\n\n// Listen for incoming connections on port 4000\nconfig.listen.tcp.isEnabled = true\nconfig.listen.tcp.interfaceIp = "0.0.0.0"\nconfig.listen.tcp.port = 4000\n\nditto.setTransportConfig(config: config)\n\ndo {\n  try ditto.tryStartSync()\n} catch (let err) {\n  print(err.localizedDescription)\n}\n'))),(0,i.kt)(s.Z,{value:"objc",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-objc"},'DITMutableTransportConfig *transportConfig = [[DITMutableTransportConfig alloc] init];\n[transportConfig.listen.tcp setEnabled:true];\n[transportConfig.listen.tcp setInterfaceIp:@"0.0.0.0"];\n[transportConfig.listen.tcp setPort:4000];\n[ditto setTransportConfig:transportConfig];\nNSError *err = nil;\n[ditto tryStartSync:&err];\n'))),(0,i.kt)(s.Z,{value:"kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val transportConfig = DittoTransportConfig();\ntransportConfig.connect.tcpServers.add("135.1.5.5:12345");\ntransportConfig.connect.tcpServers.add("185.1.5.5:12345");\nditto.tryStartSync()\n'))),(0,i.kt)(s.Z,{value:"java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'DittoTransportConfig config = new DittoTransportConfig();\nconfig.enableAllPeerToPeer();\n\nDittoListen listen = new DittoListen();\nDittoTcpListenConfig tcpListenConfig = new DittoTcpListenConfig();\ntcpListenConfig.setEnabled(true);\ntcpListenConfig.setInterfaceIp("0.0.0.0");\ntcpListenConfig.setPort(4000);\nlisten.setTcp(tcpListenConfig);\nconfig.setListen(listen);\n\ntry {\n    ditto.tryStartSync();    \n} catch(DittoError error) {\n    Log.d("DittoError", error.getLocalizedMessage());\n}\n'))),(0,i.kt)(s.Z,{value:"csharp",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp"},'DittoTransportConfig transportConfig = new DittoTransportConfig();\ntransportConfig.Listen.Tcp = new DittoTcpListenConfig();\n// By default Listen.Tcp.Enabled is false, be sure to set it to true.\ntransportConfig.Listen.Tcp.Enabled = true;\n// if you want to listen on localhost, most likely you will use 0.0.0.0\n// do not use "localhost" as a string\ntransportConfig.Listen.Tcp.InterfaceIp = "0.0.0.0"; \n// specify your port.\ntransportConfig.Listen.Tcp.Port = 4000; \nditto.SetTransportConfig(transportConfig);\n\n// now you can call `ditto.TryStartSync()` \nditto.TryStartSync();\n'))),(0,i.kt)(s.Z,{value:"cpp",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},'auto config = ditto::TransportConfig();\n\nconf.listen.tcp.enabled = true;\nconf.listen.http.enabled = false;\nconf.listen.tcp.interface_ip = "0.0.0.0";\nconf.listen.tcp.port = 4000;\n\nditto->set_transport_config(conf);\nditto->try_start_sync()\n'))),(0,i.kt)(s.Z,{value:"rust",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-rust"},'let mut config = TransportConfig::new(); // empty\n\nconfig.listen.tcp.enabled = true;\nconfig.listen.tcp.interface_ip = "0.0.0.0";\nconfig.listen.tcp.port = 4000;\nconfig.listen.http.enabled = false;\n\nditto.set_transport_config(config);\nditto.try_start_sync()?;\n')))),(0,i.kt)("p",null,"Incoming connections from other Ditto instances will be able to connect only if the port is accessible. Depending on your deployment ",(0,i.kt)("em",{parentName:"p"},"be sure to check that external connections can reach the port")," that you have specified in your configuration. You may need to set up port forwarding if external ports map differently to your host."),(0,i.kt)("h2",{id:"combining-multiple-transports"},"Combining Multiple Transports"),(0,i.kt)("p",null,"You can specify several modes of transport configuration within ",(0,i.kt)("inlineCode",{parentName:"p"},"DittoTransportConfig"),". The following snippet shows you a ditto instance that can:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Connect to local area network devices"),(0,i.kt)("li",{parentName:"ol"},"Listen for incoming remote connections"),(0,i.kt)("li",{parentName:"ol"},"Connect to remote devices with a known host and port. ")),(0,i.kt)(r.Z,{groupId:"programming-language",defaultValue:"javascript",values:[{label:"Swift",value:"swift"},{label:"Node.js",value:"javascript"},{label:"Objective-C",value:"objc"},{label:"Kotlin",value:"kotlin"},{label:"Java",value:"java"},{label:"C#",value:"csharp"},{label:"C++",value:"cpp"},{label:"Rust",value:"rust"}],mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"javascript",mdxType:"TabItem"},(0,i.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Listening on a port is only available on Node or Electron environments. This functionality will not work when running inside of a web browser. Web browsers do not allow code to listen to a host's IP or port."))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'import { TransportConfig } from "@dittolive/ditto"\n\nconst config = new TransportConfig()\n// 1. Enable All Peer to Peer Connections\nconfig.setAllPeerToPeerEnabled(true);\n\n// 2. Listen for incoming connections on port 4000\nconfig.listen.tcp.isEnabled = true\nconfig.listen.tcp.interfaceIp = "0.0.0.0"\nconfig.listen.tcp.port = 4000\n\n// 3. Connect explicitly to remote devices\nditto.setTransportConfig(config);\nditto.tryStartSync();\n'))),(0,i.kt)(s.Z,{value:"swift",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},'var config = DittoTransportConfig()\n// 1. Enable All Peer to Peer Connections\nconfig.enableAllPeerToPeer()\n\n// 2. Listen for incoming connections on port 4000\nconfig.listen.tcp.isEnabled = true\nconfig.listen.tcp.interfaceIp = "0.0.0.0"\nconfig.listen.tcp.port = 4000\n\n// 3. Connect explicitly to remote devices\nconfig.connect.tcpServers.add("135.1.5.5:12345")\nconfig.connect.tcpServers.add("185.1.5.5:12345")\n\nditto.setTransportConfig(config: config)\n\ndo {\n  try ditto.tryStartSync()\n} catch (let err) {\n  print(err.localizedDescription)\n}\n'))),(0,i.kt)(s.Z,{value:"objc",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-objc"},'DITMutableTransportConfig *transportConfig = [[DITMutableTransportConfig alloc] init];\n// 1. Enable Local Area Network Connections\n[transportConfig enableAllPeerToPeer];\n// 2. Listen for incoming connections on port 4000\n[transportConfig.listen.tcp setEnabled:true];\n[transportConfig.listen.tcp setInterfaceIp:@"0.0.0.0"];\n[transportConfig.listen.tcp setPort:4000];\n// 3. Connect explicitly to remote devices\n[transportConfig.connect.tcpServers addObject:@"135.1.5.5:12345"];\n[transportConfig.connect.tcpServers addObject:@"185.1.5.5:12345"];\n\n[ditto setTransportConfig:transportConfig];\nNSError *err = nil;\n[ditto tryStartSync:&err];\n'))),(0,i.kt)(s.Z,{value:"kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'val transportConfig = DittoTransportConfig();\n// 1. Enable All Peer to Peer Connections\ntransportConfig.enableAllPeerToPeer();\n// 2. Listen for incoming connections on port 4000\ntransportConfig.listen.tcp.enabled = true;\ntransportConfig.listen.http.enabled = false;\ntransportConfig.listen.tcp.interfaceIp = "0.0.0.0";\ntransportConfig.listen.tcp.port = 4000;\n// 3. Connect explicitly to remote devices\ntransportConfig.connect.tcpServers.add("135.1.5.5:12345");\ntransportConfig.connect.tcpServers.add("185.1.5.5:12345");\n\nditto.tryStartSync()\n'))),(0,i.kt)(s.Z,{value:"java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'DittoTransportConfig config = new DittoTransportConfig();\n\n// 1. Enable Peer to Peer Connections\nconfig.enableAllPeerToPeer();\n\n// 2. Listen for incoming connections on port 4000\nDittoListen listen = new DittoListen();\nDittoTcpListenConfig tcpListenConfig = new DittoTcpListenConfig();\ntcpListenConfig.setEnabled(true);\ntcpListenConfig.setInterfaceIp("0.0.0.0");\ntcpListenConfig.setPort(4000);\nlisten.setTcp(tcpListenConfig);\nconfig.setListen(listen);\n// 3. Connect explicitly to remote devices\nDittoConnect connect = new DittoConnect();\nconnect.setTcpServers(Sets.newHashSet("135.1.5.5:12345", "185.1.5.5:12345"));\nconfig.setConnect(connect);\n\ntry {\n    ditto.tryStartSync();    \n} catch(DittoError error) {\n    Log.d("DittoError", error.getLocalizedMessage());\n}\n'))),(0,i.kt)(s.Z,{value:"csharp",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp"},'DittoTransportConfig transportConfig = new DittoTransportConfig();\n\n// 1. Enable Local Area Network Connections\ntransportConfig.EnableAllPeerToPeer();\n\n// 2. Listen for incoming connections on port 4000\ntransportConfig.Listen.Tcp.Enabled = true;\ntransportConfig.Listen.Tcp.InterfaceIp = "0.0.0.0";\ntransportConfig.Listen.Tcp.Port = 4000;\n\n// 3. Connect explicitly to remote devices\ntransportConfig.Connect.TcpServers.Add("135.1.5.5:12345");\ntransportConfig.Connect.TcpServers.Add("185.1.5.5:12345");\n\nditto.SetTransportConfig(transportConfig);\n\nditto.TryStartSync();\n'))),(0,i.kt)(s.Z,{value:"cpp",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},'auto config = ditto::TransportConfig();\n// 1. Enable All Peer to Peer Connections\nconfig.enable_all_peer_to_peer();\n\n// 2. Listen for incoming connections on port 4000\nconfig.listen.tcp.enabled = true;\nconfig.listen.http.enabled = false;\nconfig.listen.tcp.interface_ip = "0.0.0.0";\nconfig.listen.tcp.port = 4000;\n\n// 3. Connect explicitly to remote devices\nconfig.connect.tcp_servers.insert("135.1.5.5:12345");\nconfig.connect.tcp_servers.insert("185.1.5.5:12345");\n\nditto->set_transport_config(config);\nditto->try_start_sync()\n'))),(0,i.kt)(s.Z,{value:"rust",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-rust"},'let mut config = TransportConfig::new(); // empty\n\n// 1. Enable auto-discovery of peer to peer connections\nconfig.enable_all_peer_to_peer(); // Auto-connect via lan and bluetooth\n\n// 2. Configure TCP Listener\nconfig.listen.tcp.enabled = true;\nconfig.listen.tcp.interface_ip = "0.0.0.0";\nconfig.listen.tcp.port = 4000;\nconfig.listen.http.enabled = false;\n\n// 3. Configure explicit, hard coded connections\nconfig.connect.tcp_servers.insert("135.1.5.5:12345"); // Custom TCP Listener\nconfig.connect.websocket_urls.insert("wss://example.com"); // Custom WS endpoint\n\nditto.set_transport_config(config);\nditto.try_start_sync()?;\n')))),(0,i.kt)("h2",{id:"monitoring-transport-conditions"},"Monitoring Transport Conditions"),(0,i.kt)("p",null,"If syncing over Bluetooth LE is a critical part of your application you may want to warn the user if they are missing the permission or if the hardware is disabled. Ditto will help you by reporting conditions via a delegate or callback object."),(0,i.kt)("p",null,"First, while configuring Ditto, assign a delegate or a callback to receive notifications."),(0,i.kt)(r.Z,{groupId:"programming-language",defaultValue:"swift",values:[{label:"JavaScript",value:"javascript"},{label:"Swift",value:"swift"},{label:"Objective-C",value:"objc"},{label:"Kotlin",value:"kotlin"},{label:"Java",value:"java"},{label:"C#",value:"csharp"},{label:"C++",value:"cpp"},{label:"Rust",value:"rust"}],mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"javascript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const identity = { type: 'onlinePlayground', appID: 'REPLACE_ME_WITH_YOUR_APP_ID' }\nconst ditto = new Ditto(identity, '/persistence/file/path')\nditto.tryStartSync()\n")),(0,i.kt)("p",null,"A delegate is not needed in Node.js or JavaScript.")),(0,i.kt)(s.Z,{value:"swift",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},'// Setting up inside a ViewController\nlet ditto = Ditto(identity: DittoIdentity.onlinePlayground(appID: "REPLACE_ME_WITH_YOUR_APP_ID"))\nditto.delegate = self\ntry! ditto.tryStartSync()\n'))),(0,i.kt)(s.Z,{value:"objc",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-objc"},'// Setting up inside a ViewController\nDITIdentity *identity = [[DITIdentity alloc] initOnlinePlaygroundWithAppID:@"REPLACE_WITH_APP_ID"];\nDITDitto *ditto = [[DITDitto alloc] initWithIdentity:identity];\nditto.delegate = self;\n[ditto tryStartSync:nil];\n'))),(0,i.kt)(s.Z,{value:"kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'// Setting up inside an Activity\nval androidDependencies = DefaultAndroidDittoDependencies(applicationContext)\nval ditto = Ditto(androidDependencies, DittoIdentity.OnlinePlayground(androidDependencies, "REPLACE_WITH_APP_ID"))\nditto.callback = this\nditto.tryStartSync()\n'))),(0,i.kt)(s.Z,{value:"java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'// Setting up inside an Activity\nDefaultAndroidDittoDependencies androidDependencies = new DefaultAndroidDittoDependencies(getApplicationContext());\nDitto ditto = new Ditto(androidDependencies, new DittoIdentity.OnlinePlayground(androidDependenciesOne, "REPLACE_WITH_APP_ID"));\nditto.callback = this;\nditto.tryStartSync();\n'))),(0,i.kt)(s.Z,{value:"csharp",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp"},'// Setting up inside Main\nDittoIdentity identity = DittoIdentity.OnlinePlayground("REPLACE_WITH_APP_ID");\nDitto onlineDitto = new Ditto(identity);\nditto.tryStartSync();\n'))),(0,i.kt)(s.Z,{value:"cpp",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"// API coming soon.\n"))),(0,i.kt)(s.Z,{value:"rust",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-rust"},"// API coming soon\n")))),(0,i.kt)("p",null,"Now you can observe real time changes to the transport conditions:"),(0,i.kt)(r.Z,{groupId:"programming-language",defaultValue:"javascript",values:[{label:"JavaScript",value:"javascript"},{label:"Swift",value:"swift"},{label:"Objective-C",value:"objc"},{label:"Kotlin",value:"kotlin"},{label:"Java",value:"java"},{label:"C#",value:"csharp"},{label:"C++",value:"cpp"},{label:"Rust",value:"rust"}],mdxType:"Tabs"},(0,i.kt)(s.Z,{value:"javascript",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'const transportConditionsObserver = ditto.observeTransportConditions((condition, source) => {\n  if (condition === "BLEDisabled") {\n    console.log("BLE disabled")\n  } else if (condition === "NoBLECentralPermission") {\n    console.log("Permission missing for BLE")\n  } else if (condition === "NoBLEPeripheralPermission") {\n    console.log("Permissions missing for BLE")\n  }\n})\n'))),(0,i.kt)(s.Z,{value:"swift",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},'extension ViewController: DittoDelegate {\n    func transportConditionDidChange(transportID: Int64, condition: TransportCondition) {\n        if condition == .BleDisabled {\n            print("BLE disabled")\n        } else if condition == .NoBleCentralPermission {\n            print("Permission missing for BLE")\n        } else if condition == .NoBlePeripheralPermission {\n            print("Permission missing for BLE")\n        }\n    }\n}\n'))),(0,i.kt)(s.Z,{value:"objc",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-objc"},'@interface ViewController () <DITDittoDelegate>\n\n@end\n\n@implementation ViewController\n\n- (void)transportConditionChanged:(enum DITTransportCondition)condition forSubsystem:(enum DITConditionSource)source {\n    if (condition == DITTransportConditionBleDisabled) {\n        NSLog(@"BLE disabled");\n    } else if (condition == DITTransportConditionNoBleCentralPermission) {\n        NSLog(@"Permission missing for BLE");\n    } else if (condition == DITTransportConditionNoBlePeripheralPermission) {\n        NSLog(@"Permission missing for BLE");\n    }\n}\n\n@end\n'))),(0,i.kt)(s.Z,{value:"kotlin",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-kotlin"},'class MainActivity : AppCompatActivity(), DittoCallback {\n    // ...\n    override fun transportConditionDidChange(transportId: Long, condition: TransportCondition) {\n        var toastText: String? = null\n        if (condition == TransportCondition.TRANSPORT_CONDITION_BLE_DISABLED) {\n            toastText = "BLE disabled"\n        } else if (condition == TransportCondition.TRANSPORT_CONDITION_NO_BLE_CENTRAL_PERMISSION) {\n            toastText = "Permission missing for BLE"\n        } else if (condition == TransportCondition.TRANSPORT_CONDITION_NO_BLE_PERIPHERAL_PERMISSION) {\n            toastText = "Permission missing for BLE"\n        }\n        toastText?.let {\n            Handler(mainLooper).post {\n                Toast.makeText(this, it, Toast.LENGTH_LONG).show()\n            }\n        }\n    }\n}\n'))),(0,i.kt)(s.Z,{value:"java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'public class MainActivity extends AppCompatActivity implements DittoCallback {\n    @Override\n    public void transportConditionDidChange(@NotNull DittoTransportCondition condition, @NotNull DittoConditionSource transportId) {\n        String toastText = null;\n        if (condition == DittoTransportCondition.BleDisabled) {\n            toastText = "BLE disabled";\n        } else if (condition == DittoTransportCondition.NoBleCentralPermission) {\n            toastText = "Permission missing for BLE";\n        } else if (condition == DittoTransportCondition.NoBlePeripheralPermission) {\n            toastText = "Permission missing for BLE";\n        }\n\n        if (toastText != null) {\n            String finalToastText = toastText;\n            runOnUiThread(new Runnable() {\n                @Override\n                public void run() {\n                    Toast.makeText(MainActivity.this, finalToastText, Toast.LENGTH_LONG).show();\n                }\n            });\n        }\n    }\n}\n'))),(0,i.kt)(s.Z,{value:"csharp",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-csharp"},"// API Not yet available\n"))),(0,i.kt)(s.Z,{value:"cpp",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cpp"},"// API Not yet available\n"))),(0,i.kt)(s.Z,{value:"rust",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-rust"},"// API coming soon\n")))))}m.isMDXComponent=!0},86010:function(n,t,e){function o(n){var t,e,a="";if("string"==typeof n||"number"==typeof n)a+=n;else if("object"==typeof n)if(Array.isArray(n))for(t=0;t<n.length;t++)n[t]&&(e=o(n[t]))&&(a&&(a+=" "),a+=e);else for(t in n)n[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var n,t,e=0,a="";e<arguments.length;)(n=arguments[e++])&&(t=o(n))&&(a&&(a+=" "),a+=t);return a}e.d(t,{Z:function(){return a}})}}]);