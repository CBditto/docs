<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-D8PMW3CCL2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-D8PMW3CCL2",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="Ditto" href="/opensearch.xml">
<!-- Google Tag Manager -->
    <script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-PV7QFWF",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
    <!-- End Google Tag Manager --><title data-react-helmet="true">Syncing Data | Ditto</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.ditto.live/concepts/syncing-data"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Syncing Data | Ditto"><meta data-react-helmet="true" name="description" content="By default, Ditto will not sync data with other devices.  When the device is"><meta data-react-helmet="true" property="og:description" content="By default, Ditto will not sync data with other devices.  When the device is"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.ditto.live/concepts/syncing-data"><link data-react-helmet="true" rel="alternate" href="https://docs.ditto.live/concepts/syncing-data" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.ditto.live/concepts/syncing-data" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://F25GUUSPFJ-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.d4ef7996.css">
<link rel="preload" href="/assets/js/runtime~main.1d5e5d06.js" as="script">
<link rel="preload" href="/assets/js/main.e0775b75.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="25" height="25"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button><a href="https://ditto.live" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/logo.png" alt="Ditto Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.png" alt="Ditto Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Ditto</b></a><a class="navbar__item navbar__link" href="/">Home</a><a href="https://github.com/getditto/samples" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span class="inline">Sample Apps</span></a><a href="https://github.com/getditto/docs/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span class="inline">GitHub Issues</span></a><a href="https://github.com/getditto/docs/discussions/categories/roadmap-and-ideas" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span class="inline">Roadmap</span></a></div><div class="navbar__items navbar__items--right"><a href="https://portal.ditto.live" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span class="inline">Get Started</span></a><div class="searchBox_xXbB"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">Installation</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/installation/supported-platforms">Supported Platforms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/installation/javascript">JavaScript</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/installation/android">Android</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/installation/ios">iOS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/installation/csharp">C#</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/installation/cpp">C++</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/installation/linux">Linux (Raspberry Pi)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/installation/rust">Rust</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Concepts</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/documents">Documents</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/update">Update</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/upsert">Upsert</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/querying">Querying</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/remove">Remove</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/evict">Evict</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/concepts/syncing-data">Syncing Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/concepts/online-playground">Online Playground</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Quickstart Tutorial</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Data Model</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Guides</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Security</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">How it works</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/faq">Frequently Asked Questions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/changelog">Changelog</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/getditto/docs/issues" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub Issues</span></a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_2rXS"><div class="docItemContainer_1EXp"><article class="prose max-w-none"><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_Ftrd"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Syncing Data</h1></header><p>By default, Ditto will not sync data with other devices.  When the device is
observing a query, it requests to syncronize data that matches the query from
other devices in the mesh network. </p><p>In other words, when a live query is created, Ditto&#x27;s sync system
<strong>pulls</strong> data from other devices. There is no way to &quot;push&quot; data through the
API explicitly. Devices select data they are interested in through the query
system and then synchronize with the mesh network based on that query.</p><p><img alt="Query-based Subscriptions" src="/assets/images/syncing_data_1-ea7729e691e7a89cdb04e97f63de7763.jpeg"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="sync">Sync<a aria-hidden="true" class="hash-link" href="#sync" title="Direct link to heading">​</a></h2><p>To enable Ditto to sync data, you&#x27;ll need to call <code>ditto.tryStartSync()</code>. </p><p>Preferably, you should call <code>tryStartSync()</code> early on in your application&#x27;s life cycle like in your <code>AppDelegate.application(_:didFinishLaunchingWithOptions:)</code> or <code>Application.onCreate</code> methods. Your application only needs to call this function once.</p><div class="tabs-container"><div class="sm:hidden"><label for="tabs" class="sr-only">Select a tab</label><select id="tabs" name="tabs" class="block w-full focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md"><option selected="" value="javascript">JavaScript</option><option value="swift">Swift</option><option value="objc">Objective-C</option><option value="kotlin">Kotlin</option><option value="java">Java</option><option value="csharp">C#</option><option value="cpp">C++</option><option value="rust">Rust</option><option value="bash">HTTP</option></select></div><div class="hidden sm:block"><nav class="flex space-x-4" aria-label="Tabs"><button class="bg-blue-100 text-blue-700 px-3 py-2 font-medium text-sm rounded-md" aria-current="page">JavaScript</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Swift</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Objective-C</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Kotlin</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Java</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">C#</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">C++</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Rust</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">HTTP</button></nav></div><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  ditto</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">tryStartSync</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(86, 156, 214)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token console class-name" style="color:rgb(78, 201, 176)">console</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">error</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W swift"><pre tabindex="0" class="prism-code language-swift codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">try! ditto.tryStartSync()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W objc"><pre tabindex="0" class="prism-code language-objc codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">DITDitto </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">ditto </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">TestHelpers makeDitto</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    NSError </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">error </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> nil</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">ditto tryStartSync</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">try {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ditto.tryStartSync()</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">catch (e: DittoError) {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // handle error</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">try {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ditto.tryStartSync();</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">} catch(DittoError e) {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // handle error</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">try</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">{</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    onlineDitto.TryStartSync();</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">catch (DittoException ex)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">{</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // handle exception</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  ditto</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">try_start_sync</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(86, 156, 214)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> DittoError </span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token plain">err</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:rgb(212, 212, 212)">::</span><span class="token plain">cerr </span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;&lt;</span><span class="token plain"> err</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">what</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W rust"><pre tabindex="0" class="prism-code language-rust codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">let res = ditto.try_start_sync();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div>Not supported by <!-- -->HTTP<!-- -->.</div></div></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="observe">Observe<a aria-hidden="true" class="hash-link" href="#observe" title="Direct link to heading">​</a></h2><p>Create a query with <code>.observe</code> to get notified when data changes. <a href="/concepts/querying">Learn more about how to create queries</a></p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>If the <code>liveQuery</code> object is deallocated the live query will stop. For long
running queries, store them in an object.</p></div></div><div class="tabs-container"><div class="sm:hidden"><label for="tabs" class="sr-only">Select a tab</label><select id="tabs" name="tabs" class="block w-full focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md"><option selected="" value="javascript">JavaScript</option><option value="swift">Swift</option><option value="objc">Objective-C</option><option value="kotlin">Kotlin</option><option value="java">Java</option><option value="csharp">C#</option><option value="cpp">C++</option><option value="rust">Rust</option><option value="bash">HTTP</option></select></div><div class="hidden sm:block"><nav class="flex space-x-4" aria-label="Tabs"><button class="bg-blue-100 text-blue-700 px-3 py-2 font-medium text-sm rounded-md" aria-current="page">JavaScript</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Swift</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Objective-C</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Kotlin</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Java</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">C#</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">C++</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Rust</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">HTTP</button></nav></div><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> liveQuery </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> ditto</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">store</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">collection</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;cars&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">find</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;color == &#x27;red&#x27;&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">observe</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">cars</span><span class="token parameter punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token parameter"> event</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// do something</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W swift"><pre tabindex="0" class="prism-code language-swift codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// Register live query to update UI</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">let example = ditto.store.collection(&quot;cars&quot;).find(&quot;color == &#x27;red&#x27;&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">   .observe { cars, event in</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">     // do something</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W objc"><pre tabindex="0" class="prism-code language-objc codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">DITDitto </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">ditto </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">TestHelpers makeDitto</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">// Register live query to update UI</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">DITCollection </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">collection </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">ditto</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">store collection</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token string" style="color:rgb(206, 145, 120)">@&quot;cars&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">DITLiveQuery </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">liveQuery </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">collection find</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token string" style="color:rgb(206, 145, 120)">@&quot;color == &#x27;red&#x27;&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    observe</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">^</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">NSArray</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">DITDocument </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">docs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> DITLiveQueryEvent </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">event</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// --- Register live query to update UI</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">val liveQuery = ditto.store.collection(&quot;cars&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">.findAll()</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">.observe { docs, event -&gt;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // Do something...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// --- Register live query to update UI</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">DittoLiveQuery liveQuery = ditto.store.collection(&quot;cars&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .findAll()</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .observe((docs, event) -&gt; {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            // Do something...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        });</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// --- Register live query to update UI</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">var liveQuery = ditto.Store.Collection(&quot;cars&quot;).Find(&quot;color == &#x27;red&#x27;&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    .Observe((docs, DittoLiveQueryEvent) =&gt;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">{</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // Do something...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">});</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">// --- Register live query to update UI</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">var localLiveQuery = ditto.Store.Collection(&quot;cars&quot;).Find(&quot;color == &#x27;red&#x27;&quot;).ObserveLocal((docs, DittoLiveQueryEvent) =&gt;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">{</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // Do something...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">});</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(212, 212, 212)">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">LiveQuery</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> liveQuery </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    collection</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">find</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;color == &#x27;red&#x27;&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">observe</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(212, 212, 212)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">Document</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> docs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> LiveQueryEvent event</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">          </span><span class="token comment" style="color:rgb(106, 153, 85)">// do something</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W rust"><pre tabindex="0" class="prism-code language-rust codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">let store = ditto.store(); // Ditto must have a longer lifetime than all live queries</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">let (tx, rx) = channel();</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">{</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    let live_query = store.collection(&quot;cars&quot;)?.find(&quot;color == \&#x27;red\&#x27;&quot;).observe(</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        move |mut docs: Vec&lt;BoxedDocument&gt;, event| {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            match event {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                LiveQueryEvent::Initial { .. } =&gt; { /* handle if appropriate */ }</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                LiveQueryEvent::Update { mut insertions, .. } =&gt; {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                    insertions.sort_by(|a, b| b.cmp(a));</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                    for idx in insertions.iter() {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                        let doc = docs.remove(*idx);</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                        let _ = tx.send(doc).unwrap();</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                    }</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">                }</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            }</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        },</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    )?;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    store</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .collection(&quot;cars&quot;)?</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .upsert(json!({&quot;color&quot;: &quot;red&quot;}))</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .unwrap();</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    for doc in rx.iter() {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        println!(&quot;New doc {:?}&quot;, doc);</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">} // IMPORTANT: LiveQuery goes out of scope and is Dropped and terminated here.</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div>Not supported by <!-- -->HTTP<!-- -->.</div></div></div></div><ul><li>Call <code>.observe</code> after <code>ditto.tryStartSync()</code> to syncronize and download real-time data from other peers.</li><li>The callback will immediately run for documents that fit the query.</li><li>The callback will get called with both local and remote changes that fit the query. </li><li>The callback will rerun for each sync or write transaction.</li><li>You can create as many <code>LiveQuery</code> objects as you want.</li><li>To manually stop the <code>liveQuery</code>, set it either to <code>null</code> or call <code>liveQuery.stop()</code></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="subscribe">Subscribe<a aria-hidden="true" class="hash-link" href="#subscribe" title="Direct link to heading">​</a></h2><p>Having a subscription acts as a signal to other peers that you are interested in
receiving updates when local or remote changes are made to
documents that match the query generated by the chain of operations that
precedes the call to <code>subscribe</code>.</p><p>The returned Subscription object must be kept in scope for as long as
you want to keep receiving updates. Subscribe is different than <code>observe</code>
because a callback is not required. This can be more memory efficient. This function is useful if you&#x27;re just interested in subscribing to changes on a query to have a local offline copy of the data, but do not want to operate on the results.</p><div class="tabs-container"><div class="sm:hidden"><label for="tabs" class="sr-only">Select a tab</label><select id="tabs" name="tabs" class="block w-full focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md"><option selected="" value="javascript">JavaScript</option><option value="swift">Swift</option><option value="objc">Objective-C</option><option value="kotlin">Kotlin</option><option value="java">Java</option><option value="csharp">C#</option><option value="cpp">C++</option><option value="rust">Rust</option><option value="bash">HTTP</option></select></div><div class="hidden sm:block"><nav class="flex space-x-4" aria-label="Tabs"><button class="bg-blue-100 text-blue-700 px-3 py-2 font-medium text-sm rounded-md" aria-current="page">JavaScript</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Swift</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Objective-C</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Kotlin</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Java</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">C#</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">C++</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Rust</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">HTTP</button></nav></div><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> subscription </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> ditto</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">store</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">collection</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;cars&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">find</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;color == &#x27;red&#x27;&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">subscribe</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W swift"><pre tabindex="0" class="prism-code language-swift codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// Register live query to update UI</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">let subscription = ditto.store.collection(&quot;cars&quot;).find(&quot;color == &#x27;red&#x27;&quot;).subscribe()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W objc"><pre tabindex="0" class="prism-code language-objc codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">DITDitto </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">ditto </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">TestHelpers makeDitto</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">// Register live query to update UI</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">DITCollection </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">collection </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">ditto</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">store collection</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token string" style="color:rgb(206, 145, 120)">@&quot;cars&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">DITLiveQuery </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">liveQuery </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">collection find</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token string" style="color:rgb(206, 145, 120)">@&quot;color == &#x27;red&#x27;&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"> subscribe</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// --- Register live query to update UI</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">val subscription = ditto.store.collection(&quot;cars&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">.find(&quot;color == &#x27;red&#x27;&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">.subscribe()</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// --- Register live query to update UI</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">DittoSubscription subscription = ditto.store.collection(&quot;cars&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .findAll()</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .subscribe();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// --- Register live query to update UI</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">var subscription = ditto.Store.Collection(&quot;cars&quot;).Find(&quot;color == &#x27;red&#x27;&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    .Subscribe();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">ditto</span><span class="token double-colon punctuation" style="color:rgb(212, 212, 212)">::</span><span class="token plain">Subscription subscription </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    collection</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">find</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;color == &#x27;red&#x27;&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">subscribe</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W rust"><pre tabindex="0" class="prism-code language-rust codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">let store = ditto.store(); // Ditto must have a longer lifetime than all live queries</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">let live_query = store</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    .collection(&quot;cars&quot;)?</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    .find(&quot;color == \&#x27;red\&#x27;&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    .subscribe();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div>Not supported by <!-- -->HTTP<!-- -->.</div></div></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="multi-hop-replication">Multi-hop replication<a aria-hidden="true" class="hash-link" href="#multi-hop-replication" title="Direct link to heading">​</a></h2><p>Given that Ditto works peer-to-peer, devices can form into arbitrary groups
based on the proximity to one another, or rather they create an ad-hoc mesh
network. Ditto&#x27;s sync system allows for devices to share data through another
device, called &quot;multi-hop&quot; sync. The only requirement for this to occur is that
all devices in the chain must be observing the same data, as shown below:</p><p><img alt="Multi-hop Subscriptions" src="/assets/images/syncing_data_2_same_query-87091cf2834836795c5a9bae0bce5ecf.jpeg"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="live-queries-without-syncing-data">Live Queries without Syncing Data<a aria-hidden="true" class="hash-link" href="#live-queries-without-syncing-data" title="Direct link to heading">​</a></h2><p>There are many situations where your app needs to observe live queries <em>without</em>
initiating syncing with other devices. For example, this is useful if your app
intends to treat certain documents and collections as local-only data.</p><p>Instead of <code>.observe</code>, call <code>.observeLocal</code> like so:</p><div class="tabs-container"><div class="sm:hidden"><label for="tabs" class="sr-only">Select a tab</label><select id="tabs" name="tabs" class="block w-full focus:ring-blue-500 focus:border-blue-500 border-gray-300 rounded-md"><option selected="" value="javascript">JavaScript</option><option value="swift">Swift</option><option value="objc">Objective-C</option><option value="kotlin">Kotlin</option><option value="java">Java</option><option value="csharp">C#</option><option value="cpp">C++</option><option value="rust">Rust</option><option value="bash">HTTP</option></select></div><div class="hidden sm:block"><nav class="flex space-x-4" aria-label="Tabs"><button class="bg-blue-100 text-blue-700 px-3 py-2 font-medium text-sm rounded-md" aria-current="page">JavaScript</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Swift</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Objective-C</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Kotlin</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Java</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">C#</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">C++</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">Rust</button><button class="text-gray-500 hover:text-gray-700 px-3 py-2 font-medium text-sm rounded-md">HTTP</button></nav></div><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token keyword" style="color:rgb(86, 156, 214)">const</span><span class="token plain"> liveQuery </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> ditto</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token property-access">store</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">collection</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&#x27;cars&#x27;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">find</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;color == &#x27;red&#x27;&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token method function property-access" style="color:rgb(220, 220, 170)">observeLocal</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token parameter">cars</span><span class="token parameter punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token parameter"> event</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(212, 212, 212)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// do something</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W swift"><pre tabindex="0" class="prism-code language-swift codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// --- Action somewhere in your application</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">func userDidInsertCar() {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    _ = try! ditto.store.collection(&quot;cars&quot;).upsert([</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        &quot;model&quot;: &quot;Ford&quot;,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        &quot;color&quot;: &quot;black&quot;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ])</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">// Register live query to update UI</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">let liveQuery = ditto.store.collection(&quot;cars&quot;).find(&quot;color == &#x27;red&#x27;&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    .observeLocal { cars, event in</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        // do something</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W objc"><pre tabindex="0" class="prism-code language-objc codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">DITDitto </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">ditto </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">TestHelpers makeDitto</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token comment" style="color:rgb(106, 153, 85)">// Register live query to update UI</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">DITCollection </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">collection </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">ditto</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token plain">store collection</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token string" style="color:rgb(206, 145, 120)">@&quot;cars&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">DITLiveQuery </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">liveQuery </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token plain">collection find</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token string" style="color:rgb(206, 145, 120)">@&quot;color == &#x27;red&#x27;&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    observeLocal</span><span class="token punctuation" style="color:rgb(212, 212, 212)">:</span><span class="token operator" style="color:rgb(212, 212, 212)">^</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">NSArray</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">DITDocument </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">docs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> DITLiveQueryEvent </span><span class="token operator" style="color:rgb(212, 212, 212)">*</span><span class="token plain">event</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain"></span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W kotlin"><pre tabindex="0" class="prism-code language-kotlin codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// --- Action somewhere in your application</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">fun userDidInsertCar() {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ditto.store.collection(&quot;cars&quot;).upsert(mapOf(</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        &quot;model&quot; to &quot;Ford&quot;,</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        &quot;color&quot; to &quot;black&quot;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    ))</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">// --- Register live query to update UI</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">val observeLocalQuery = ditto.store.collection(&quot;cars&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    .findAll()</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    .observeLocal { docs, event -&gt;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // Do something...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W java"><pre tabindex="0" class="prism-code language-java codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// --- Action somewhere in your application</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">Map&lt;String, Object&gt; content = new HashMap&lt;&gt;();</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">content.put(&quot;model&quot;, &quot;Ford&quot;);</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">content.put(&quot;color&quot;, &quot;black&quot;);</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">ditto.store.collection(&quot;cars&quot;).upsert(content);</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">// --- Register live query to update UI</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">DittoLiveQuery liveQueryLocal = ditto.store.collection(&quot;cars&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .findAll()</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .observeLocal((docs, event) -&gt; {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            // Do something...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        });</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// --- Register live query to update UI</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">var localLiveQuery = ditto.Store.Collection(&quot;cars&quot;).Find(&quot;color == &#x27;red&#x27;&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    .ObserveLocal((docs, DittoLiveQueryEvent) =&gt;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">{</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // Do something...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">});</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token comment" style="color:rgb(106, 153, 85)">// --- Register live query to update UI</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(212, 212, 212)">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">LiveQuery</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> query </span><span class="token operator" style="color:rgb(212, 212, 212)">=</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    collection</span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">find</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token string" style="color:rgb(206, 145, 120)">&quot;color == &#x27;red&#x27;&quot;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">.</span><span class="token function" style="color:rgb(220, 220, 170)">observe_local</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token punctuation" style="color:rgb(212, 212, 212)">[</span><span class="token operator" style="color:rgb(212, 212, 212)">&amp;</span><span class="token punctuation" style="color:rgb(212, 212, 212)">]</span><span class="token punctuation" style="color:rgb(212, 212, 212)">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(212, 212, 212)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(212, 212, 212)">&lt;</span><span class="token plain">Document</span><span class="token operator" style="color:rgb(212, 212, 212)">&gt;</span><span class="token plain"> docs</span><span class="token punctuation" style="color:rgb(212, 212, 212)">,</span><span class="token plain"> LiveQueryEvent event</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(212, 212, 212)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(212, 212, 212)">}</span><span class="token punctuation" style="color:rgb(212, 212, 212)">)</span><span class="token punctuation" style="color:rgb(212, 212, 212)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_2gih"><div class="codeBlockContent_3z4W rust"><pre tabindex="0" class="prism-code language-rust codeBlock_6upA thin-scrollbar"><code class="codeBlockLines_xlV7"><span class="token-line" style="color:#9CDCFE"><span class="token plain">// Some action in your app ...</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">let store = ditto.store();</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">store.collection(&quot;cars&quot;)?.upsert(json!({&quot;color&quot;: &quot;red&quot;}))?;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">// Elsewhere register handlers for data changes</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">{</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    let live_query = store</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .collection(&quot;cars&quot;)?</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .find(&quot;color == \&#x27;red\&#x27;&quot;)</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        .observe_local(move |cars, event| {</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            println!(&quot;cars {:?}, event {:?}&quot;, cars, event);</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            // do something when data changes</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">            // BUT this closure must be permitted to take ownership</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">        })?;</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // stash your live query in something with a long lifetime</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">    // or it will be dropped</span></span><span class="token-line" style="color:#9CDCFE"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_2e3i clean-btn"><div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-4 h-4 inline mr-1"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg><span class="text-xs">Copy</span></div></button></div></div></div><div role="tabpanel" hidden=""><div>Not supported by <!-- -->HTTP<!-- -->.</div></div></div></div><p>Note: if your Ditto instance has not called <code>tryStartSync</code>, there will be no difference between <code>.observe</code> and <code>.observeLocal</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/getditto/docs/edit/master/docs/concepts/syncing-data.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/concepts/evict"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Evict</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/concepts/online-playground"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Online Playground<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#sync" class="table-of-contents__link toc-highlight">Sync</a></li><li><a href="#observe" class="table-of-contents__link toc-highlight">Observe</a></li><li><a href="#subscribe" class="table-of-contents__link toc-highlight">Subscribe</a></li><li><a href="#multi-hop-replication" class="table-of-contents__link toc-highlight">Multi-hop replication</a></li><li><a href="#live-queries-without-syncing-data" class="table-of-contents__link toc-highlight">Live Queries without Syncing Data</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Quick Start</a></li><li class="footer__item"><a href="https://www.ditto.live/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Main Website</span></a></li><li class="footer__item"><a href="https://github.com/getditto/samples" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Samples Apps</span></a></li><li class="footer__item"><a class="footer__link-item" href="/changelog">Changelog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/getditto/docs/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub Discussions</span></a></li><li class="footer__item"><a href="https://github.com/getditto/docs/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub Issues</span></a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/ditto" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow</span></a></li><li class="footer__item"><a href="https://twitter.com/dittolive" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter</span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 DittoLive, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1d5e5d06.js"></script>
<script src="/assets/js/main.e0775b75.js"></script>
<!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PV7QFWF" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) --></body>
</html>